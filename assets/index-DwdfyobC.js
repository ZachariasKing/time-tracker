(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();class l{constructor(e=7200,t=null,n=!1){this.duration=e,this.remaining=e,this.startTime=t,this.interval=null,this.isRunning=n}start(e){e(this.remaining),this.interval=setInterval(()=>{this.remaining>0?(this.remaining--,e(this.remaining)):(this.pause(),e(0))},1e3)}pause(){this.isRunning=!1,clearInterval(this.interval)}clear(){this.pause(),this.remaining=0}getTimeParts(){const e=Math.floor(this.remaining/3600),t=Math.floor(this.remaining%3600/60),n=this.remaining%60;return{hrs:e,mins:t,secs:n}}getIsRunning(){return this.isRunning}setIsRunning(e){this.isRunning=e}}class d{constructor(e,t,n){this.model=t,this.repo=n,this.interval=null,this.timerView=e}startTimer(e){var t;if((t=this.model)!=null&&t.getIsRunning()){console.warn("A timer is already running. Please stop it before starting a new one.");return}this.model=new l(e,new Date),this.model.setIsRunning(!0),this.repo.save(this.model),this.model.start(n=>{this.timerView.updateTimerDisplay(this.model.remaining),this.timerFinished(n)})}pauseTimer(){timer==null||timer.pause()}clearTimer(){this.model?(this.repo.clear(),this.model.clear(),this.timerView.clearTimerDisplay(),this.model=null):(console.warn("No timer to clear."),this.timerView.clearTimerDisplay())}isRunning(){var e;return(e=this.model)==null?void 0:e.getIsRunning()}setRemainingTime(e){this.model?this.model.remaining=e:console.warn("No timer instance to set remaining time.")}resumeFromSaved(){var t;this.timerView.toggleLoadingSpinner(!0);const e=this.repo.load();if(e){let n=((t=e==null?void 0:e.startTime)==null?void 0:t.getTime())/1e3+(e==null?void 0:e.duration),i=Math.floor(n-Date.now()/1e3);i>0?(this.model=e,this.setRemainingTime(i>0?i:0),this.model.getIsRunning()&&this.model.start(this.timerView.updateTimerDisplay)):this.repo.clear()}else this.timerView.setBlankTimer();this.timerView.toggleLoadingSpinner(!1)}timerFinished(e){e===0&&this.repo.clear()}}class u{save(e){throw new Error("Not implemented")}load(){throw new Error("Not implemented")}clear(){throw new Error("Not implemented")}}class c{constructor(e,t,n){this.duration=e,this.startTime=t,this.isRunning=n}}class m{static fromTimerModel(e){return new c(e.duration,e.startTime?e.startTime.toISOString():null,e.isRunning)}static toTimerModel(e){return new l(this.duration=e.duration,this.startTime=new Date(e.startTime),this.isRunning=e.isRunning)}}class h extends u{constructor(e="timer"){super(),this.key=e}save(e){const t=m.fromTimerModel(e);localStorage.setItem(this.key,JSON.stringify(t))}load(){const e=localStorage.getItem(this.key);if(!e)return null;const t=JSON.parse(e);return m.toTimerModel(new c(t.duration,t.startTime,t.isRunning))}clear(){localStorage.removeItem(this.key)}}class g{updateTimerDisplay(e){if(e===0){this.timerFinished();return}const t=document.getElementById("timer-p"),n=document.getElementsByTagName("title")[0],i=String(Math.floor(e/3600)).padStart(2,"0"),r=String(Math.floor(e%3600/60)).padStart(2,"0"),o=String(e%60).padStart(2,"0");t.textContent=`${i}:${r}:${o}`,n.textContent=`${i}:${r}:${o} left on timer`}timerFinished(){document.getElementById("timer-finished-sound").play().catch(t=>{console.error("Error playing audio:",t)}),this.changeTimerAndTitleText("00:00:00","Timer Finished")}clearTimerDisplay(){this.changeTimerAndTitleText("00:00:00","Time Tracker"),document.getElementById("timer-cleared-sound").play().catch(t=>{console.error("Error playing audio:",t)})}changeTimerAndTitleText(e,t){const n=document.getElementById("timer-p"),i=document.getElementsByTagName("title")[0];n.textContent=e,i.textContent=t}toggleLoadingSpinner(e){let t=document.getElementById("timer-spinner");e?t.classList.remove("d-none"):t.classList.add("d-none")}setBlankTimer(){this.changeTimerAndTitleText("00:00:00","Time Tracker")}}const p=new l,T=new h,f=new g,a=new d(f,p,T);a.resumeFromSaved();document.getElementById("start-timer-button").addEventListener("click",()=>{const s=document.getElementById("time-input").value;if(s===""){console.warn("Please enter a duration in seconds.");return}else if(a.isRunning()){console.warn("A timer is already running. Please stop it before starting a new one.");return}const e=s,[t,n,i]=e.split(":"),r=+t*60*60+ +n*60+ +i;a.startTimer(r)});document.getElementById("clear-timer-button").addEventListener("click",()=>{a.clearTimer()});y();function y(){let s=document.getElementsByClassName("quick-timer-button");for(let e=0;e<s.length;e++)s[e].addEventListener("click",function(){if(a.isRunning()){console.warn("A timer is already running. Please stop it before starting a new one.");return}const t=parseInt(this.getAttribute("data-duration"),10);a.startTimer(t)})}
